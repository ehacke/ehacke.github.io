<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<div id="timeline" style="height: 1800px;"></div>
<script>
    google.charts.load('current', {'packages': ['timeline']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        var container = document.getElementById('timeline');
        var chart = new google.visualization.Timeline(container);
        var dataTable = new google.visualization.DataTable();

        dataTable.addColumn({type: 'string', id: 'Layer'});
        dataTable.addColumn({type: 'string', id: 'Function'});
        dataTable.addColumn({type: 'number', id: 'Start'});
        dataTable.addColumn({type: 'number', id: 'End'});

        var searchApiStart = 1750;
        var searchApiEnd = searchApiStart + 1260;
        var suggestionsStart = searchApiEnd;

        dataTable.addRows([
            ['Frontend', 'HTML', 0, 800],
            ['Frontend', 'Resources', 800, 1000],
            ['Frontend', 'Scripting', 1000, 1600],
            ['Frontend', 'Banners API', 1600, 1750],
            ['Backend', 'RealTimeCompositeProductFirstCatNavSearcher', 1600, 1750],
            ['Data', 'ES', 1600, 1700],

            ['Frontend', 'Search API', searchApiStart, searchApiEnd],

            ['Backend', 'getFallbackRetrievalResponse', searchApiStart + 60, searchApiStart + 260],
            ['Data', 'ES', searchApiStart + 113, searchApiStart + 219],
            ['Backend', 'getPromotedPlacementRetrievalResponse', searchApiStart + 60, searchApiStart + 212],
            ['Data', 'ES', searchApiStart + 120, searchApiStart + 190],
            ['Backend', 'getRetrievalResponse', searchApiStart + 60, searchApiStart + 260],
            ['Data', 'ES', searchApiStart + 115, searchApiStart + 224],
            ['Backend', 'SearchCandidatesAggregator.getInitialRetrievalResponse.NEW_BRANDS', searchApiStart + 60, searchApiStart + 197],
            ['Data', 'ES', searchApiStart + 120, searchApiStart + 180],

            ['Backend', 'getPromotedPlacementRankedCandidates', searchApiStart + 278, searchApiStart + 380],
            ['Backend', 'extractFeatures', searchApiStart + 278, searchApiStart + 350],
            ['Data', 'redis', searchApiStart + 294, searchApiStart + 336],
            ['Backend', 'computeFeatures', searchApiStart + 356, searchApiStart + 375],
            ['Backend', 'executeModels', searchApiStart + 375, searchApiStart + 380],

            ['Backend', 'getRankedCandidates', searchApiStart + 278, searchApiStart + 460],
            ['Backend', 'extractFeatures', searchApiStart + 278, searchApiStart + 378],
            ['Data', 'redis', searchApiStart + 302, searchApiStart + 378],
            ['Backend', 'computeFeatures', searchApiStart + 379, searchApiStart + 436],
            ['Backend', 'executeModels', searchApiStart + 436, searchApiStart + 459],

            ['Backend', 'postProcessResponseBuilder', searchApiStart + 463, searchApiStart + 512],
            ['Data', 'sql', searchApiStart + 485, searchApiStart + 512],
            ['Backend', 'buildResponseAndRecordImpressions', searchApiStart + 522, searchApiStart + 565],

            ['Backend', 'wire', searchApiStart + 566, searchApiStart + 621],
            ['Backend', 'logging', searchApiStart + 622, searchApiStart + 811],
            ['Backend', 'lean-product-tiles', searchApiStart + 825, searchApiStart + 893],

            ['Backend', 'wire', searchApiStart + 944, searchApiStart + 988],

            ['Frontend', 'Suggestions API', suggestionsStart, suggestionsStart + 199],
            ['Frontend', 'Suggestions API', suggestionsStart, suggestionsStart + 439],

            ['Backend', 'findMatchingBrands', suggestionsStart + 7, suggestionsStart + 398],
            ['Data', 'sql', suggestionsStart + 43, suggestionsStart + 320],
            ['Backend', 'SearchSuggestedSearchTermProvider.get', suggestionsStart + 400, suggestionsStart + 423],
            ['Data', 'sql', suggestionsStart + 400, suggestionsStart + 423],
            ['Backend', 'findRecentSearches', suggestionsStart + 423, suggestionsStart + 439],
            ['Data', 'sql', suggestionsStart + 423, suggestionsStart + 439],

            ['Frontend', 'Image Loading', suggestionsStart + 439, suggestionsStart + 539],
        ]);

        chart.draw(dataTable);
    }
</script>
</body>
</html>
